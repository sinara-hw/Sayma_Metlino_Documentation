Front panel and headers
=======================

.. figure:: img/frontcallout.png

Front view

.. figure:: img/topcallout1.png

Front view

+---------------------------------------------------------------------------+
| Call out table                                                            |
+----------+------------+---------------------------------------------------+
| Call out | Designator | Description                                       |
+----------+------------+---------------------------------------------------+
| 1        | J15        | GPIO - IO1                                        |
+----------+------------+---------------------------------------------------+
| 2        | J26        | GPIO - IO2                                        |
+----------+------------+---------------------------------------------------+
| 3        | J27        | CLK OUT output driven by Si5324 (CDR\_CLK\_CLEAN3)|
+----------+------------+---------------------------------------------------+
| 4        | J28        | FMC connector                                     |
+----------+------------+---------------------------------------------------+
| 5        | LD13       | Error                                             |
+----------+------------+---------------------------------------------------+
| 6        | LD18       | Hot swap                                          |
+----------+------------+---------------------------------------------------+
| 7        | PB3        | routed to MMC, allows to flash MMC via USB        |
+----------+------------+---------------------------------------------------+
| 8        | cage2      | SFP Cage                                          |
+----------+------------+---------------------------------------------------+
| 9        | cage1      | SFP Cage                                          |
+----------+------------+---------------------------------------------------+
| 10       | J1         | Micro USB -->Serial                               |
+----------+------------+---------------------------------------------------+
| 11       | LD14       | operation successful                              |
+----------+------------+---------------------------------------------------+
| 12       | LD16       | SFP LED2                                          |
+----------+------------+---------------------------------------------------+
| 13       | LD3        | SFP LED1                                          |
+----------+------------+---------------------------------------------------+
| 14       | LD6        | LINK UP                                           |
+----------+------------+---------------------------------------------------+
| 15       | LD4        | MII MODE                                          |
+----------+------------+---------------------------------------------------+
| 16       | LD15       | SFP LED2                                          |
+----------+------------+---------------------------------------------------+
| 17       | LD2        | SFP LED1                                          |
+----------+------------+---------------------------------------------------+
| 18       | LD5        | FPGA ETH                                          |
+----------+------------+---------------------------------------------------+
| 19       | J28        | FMC header                                        |
+----------+------------+---------------------------------------------------+
| 20       | J3         | JTAG header connected to SCANSTA                  |
+----------+------------+---------------------------------------------------+
| 21       | J14        | MMC JTAG                                          |
+----------+------------+---------------------------------------------------+
| 22       | SW1        | FPGA MODE, see SW1 paragraph                      |
+----------+------------+---------------------------------------------------+
| 23       | J13        | Digital IOs connected to FPGA                     |
+----------+------------+---------------------------------------------------+
| 24       | J12        | SLAVE SATA                                        |
+----------+------------+---------------------------------------------------+
| 25       | J11        | MASTER SATA                                       |
+----------+------------+---------------------------------------------------+
| 26       | J4         | Power In                                          |
+----------+------------+---------------------------------------------------+
| 27       | J10        | SATA connected to Port 0                          |
+----------+------------+---------------------------------------------------+
| 28       | W1         | EXAR I2C header                                   |
+----------+------------+---------------------------------------------------+
| 29       | --         | P12V0                                             |
+----------+------------+---------------------------------------------------+
| 30       | --         |  Test points                                      |
+----------+------------+---------------------------------------------------+
| 31       | J6         | RTM Connector                                     |
+----------+------------+---------------------------------------------------+
| 32       | J2         | AMC Connector                                     |
+----------+------------+---------------------------------------------------+

.. figure: img/botcallout1.png
Front view


Callout 5: LD13 is

* off if MMC is ok 
* red if MMC is in an error state

Callout 6: LD4 is

* off the board has initialized in crate
* blue if power is cut off and is possible to remove the board.

Callout 33: LD21 is

* green if FPGA is configured
* off if FPGA is not configured

Callout 11: LD14 is

* green if MMC successfulled operation
* off if MMC unsuccessfuled operation

Callout 14: LD20 is

* green if Link is up
* off if Link is down

Callout 15: LD18 is

* green if Ethernet is in MII mode (mTCA doesn't support 100mbit Ethernet)
* off if Ethernet is in RGMII mode


Callout 12: LD3 is

* red if SFP2 - user defined
* off if SFP2 - user defined

Callout 13: LD6 is

* green if SFP2 - user defined
* off if SFP2 - user defined

Callout 16: LD2 is

* red if SFP1 - user defined
* off if SFP1 - user defined

Callout 17: LD5 is

* green if SFP1 - user defined
* off if SFP1 - user defined

Callout 18: LD19 is

* green if - user defined
* off if - user defined

+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| Power LED table                                                                                  |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| Call out  | Designator  | Description          | Colour  | nominal state  | IC        | Failure  |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 5         | LD13        | Error                | Red     | off            | MMC       | on       |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 6         | LD4         | Hot Swap             | Blue    | on             | MMC       | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 6         | LD21        | FPGA config done     | Green   | on             | FPGA      | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 11        | LD14        | Operation succesful  | Green   | on             | MMC       | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 12        | LD3         | SFP2 LED2            | Red     | on             | FPGA      | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 13        | LD6         | SFP2 LED1            | Green   | on             | FPGA      | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 14        | LD20        | LINK UP              | Green   | on             | MAX24287  | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 15        | LD18        | MII MODE             | Green   | on             | MMC       | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 16        | LD2         | SFP1 LED2            | Red     | on             | FPGA      | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 17        | LD5         | SFP1 LED1            | Green   | on             | FPGA      | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 18        | LD19        | FPGA ETH             | Green   | on             | MMC       | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 30        | LD22        | 3V3                  | Green   | on             | Power     | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 30        | LD7         | 0V95                 | Green   | on             | Power     | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 30        | LD11        | 0V9                  | Green   | on             | Power     | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 30        | LD8         | 1V5                  | Green   | on             | Power     | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 30        | LD9         | 1V8                  | Green   | on             | Power     | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+
| 30        | LD10        | 12V                  | Green   | on             | Power     | off      |
+-----------+-------------+----------------------+---------+----------------+-----------+----------+

Headers pinout
--------------

.. figure:: img/jtag1.png

JTAG - Call out 20

.. figure:: img/jtaglpc.png

JTAG - Call out 21

.. figure:: img/gpio.png

DIO - Call out 23

+------+------------------------------------------------------+----------+
| Tespoints table - Call out 30                                          |
+------+------------------------------------------------------+----------+
| TPx  | Sig Name                                             | LPC pin  |
+------+------------------------------------------------------+----------+
| TP1  | MII1\_col                                            | C13      |
+------+------------------------------------------------------+----------+
| TP2  | SDCLK                                                | J10      |
+------+------------------------------------------------------+----------+
| TP3  | SDCMD                                                | K14      |
+------+------------------------------------------------------+----------+
| TP4  | SDPWR                                                | K11      |
+------+------------------------------------------------------+----------+
| TP5  | SDDAT0                                               | L14      |
+------+------------------------------------------------------+----------+
| TP6  | SDDAT1                                               | M12      |
+------+------------------------------------------------------+----------+
| TP7  | SDDAT2                                               | N14      |
+------+------------------------------------------------------+----------+
| TP8  | SDDAT3                                               | M11      |
+------+------------------------------------------------------+----------+


Location of ICs
---------------

.. figure:: img/TU1.png

Top

.. figure:: img/BU1.png

Bot

+-----+------------------+-------------------------------+
| ICs Location                                           |
+-----+------------------+-------------------------------+
| Ux  | IC               | Description                   |
+-----+------------------+-------------------------------+
| U1  | Kintex           | FPGA                          |
+-----+------------------+-------------------------------+
| U2  | LTC 6957         | Low Phase Noise Buffer        |
+-----+------------------+-------------------------------+
| U4  | TPS53353         | P0V9                          |
+-----+------------------+-------------------------------+
| U5  | XR77129          | EXAR                          |
+-----+------------------+-------------------------------+
| U6  | TPS 74401        | P1V2                          |
+-----+------------------+-------------------------------+
| U7  | TPS 74401        | P0V95                         |
+-----+------------------+-------------------------------+
| U3  | SI5324C          | Clock recovery                |
+-----+------------------+-------------------------------+
| U8  | TCA9548          | I2C switch - MMC              |
+-----+------------------+-------------------------------+
| U9  | TCA9548          | I2C switch - FPGA             |
+-----+------------------+-------------------------------+
| U10 | 74HC4066PW       | Analog switch - Flash update  |
+-----+------------------+-------------------------------+
| U11 | N25Q256A13ESF40  | NOR Flash                     |
+-----+------------------+-------------------------------+
| U12 | N25Q256A13ESF40  | NOR Flash                     |
+-----+------------------+-------------------------------+
| U13 | SN74CB3Q32245ZKE | Digital Bus switch - RGMI/MII |
+-----+------------------+-------------------------------+
| U14 | LPC1776FET180    | MMC                           |
+-----+------------------+-------------------------------+
| U15 | MAX24287ETK+     | ETH switch                    |
+-----+------------------+-------------------------------+
| U16 | AN74CBT3257PW    | USB console switch            |
+-----+------------------+-------------------------------+
| U17 | N25Q256A13ESF40  | NOR Flash - MMC               |
+-----+------------------+-------------------------------+
| U18 | M93C46           | EEPROM                        |
+-----+------------------+-------------------------------+
| U19 | F4232H-56Q       | USB-UART Bridge               |
+-----+------------------+-------------------------------+
| U20 | 74HC4066PW       | USB-UART Switch               |
+-----+------------------+-------------------------------+
| U21 | SCANSTA112SM     | SCANSTA JTAG Switch           |
+-----+------------------+-------------------------------+
| U22 | FDMS7608S        | EXAR Transistors              |
+-----+------------------+-------------------------------+
| U23 | SN65MLVD040RGZT  | LVDS transceiver              |
+-----+------------------+-------------------------------+
| U24 | SN65MLVD040RGZT  | LVDS transceiver              |
+-----+------------------+-------------------------------+
| U25 | TPS62175         | P5V0                          |
+-----+------------------+-------------------------------+
| U26 | TPS62175         | P3V3                          |
+-----+------------------+-------------------------------+



SW1
---

SW1 is used to chose configuration mode of the FPGA. Configuration modes define the specifics of how the FPGA will interact with the data source, external control logic. SW1 is tied directly to Bank 0 pf FPGA. All pins have pull up, switching SW1 proceed of connecting to lower potential.

+-----+-----+-----+-----------------------+
| SW1 table                               |
+-----+-----+-----+-----------------------+
| M0  | M1  | M2  | Description           |
+-----+-----+-----+-----------------------+
| 0   | 0   | 0   | Master Serial Mode    |
+-----+-----+-----+-----------------------+
| 0   | 0   | 1   | Master Parallel Up    |
+-----+-----+-----+-----------------------+
| 0   | 1   | 1   | Master Parallel Down  |
+-----+-----+-----+-----------------------+
| 1   | 0   | 1   | Peripheral mode       |
+-----+-----+-----+-----------------------+
| 1   | 1   | 1   | Slave Serial mode     |
+-----+-----+-----+-----------------------+
